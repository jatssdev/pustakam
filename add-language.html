<script src="./assets/js/apis/auth.js"></script>

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <link rel="apple-touch-icon" sizes="76x76" href="./assets/img/logo-small.png">
    <link rel="icon" type="image/png" href="./assets/img/logo-small.png">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title data-translate="logotxt">Pustakam</title>
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no'
        name='viewport' />
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700,200" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
        integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="./assets/css/bootstrap.min.css" rel="stylesheet" />
    <link href="./assets/css/paper-dashboard.css?v=2.0.1" rel="stylesheet" />
    <link href="./assets/demo/demo.css" rel="stylesheet" />
    <style>
        /* Sidebar styling for visibility on smaller screens */
        @media (max-width: 991px) {
            .sidebar {
                display: none;
                position: fixed;
                top: 0;
                bottom: 0;
                left: 0;
                z-index: 1040;
                height: 100%;
                background-color: #fff;
                transition: transform 0.3s ease;
            }

            .sidebar.show {
                display: block;
                transform: translateX(0);
            }

            .main-panel {
                padding-left: 0;
            }

            .navbar-toggler {
                display: inline-block;
            }
        }
    </style>
</head>

<body>
    <div class="wrapper">
        <div class="sidebar" data-color="white" data-active-color="danger">
            <div class="logo">
                <a href="/" class="simple-text logo-mini">
                    <div class="logo-image-small">
                        <img src="./assets/img/logo-small.png">
                    </div>
                </a>
                <a href="/" class="simple-text logo-normal" data-translate="logotxt">Pustakam</a>
            </div>
            <div class="sidebar-wrapper">
                <ul class="nav">
                    <li>
                        <a href="/">
                            <i class="nc-icon nc-bank"></i>
                            <p data-translate="dashboard">Dashboard</p>
                        </a>
                    </li>
                    <li>
                        <a href="./categories.html">
                            <i class="fa fa-folder"></i>
                            <p data-translate="categories">Categories</p>
                        </a>
                    </li>
                    <li>
                        <a href="./authers.html">
                            <i class="fa-solid fa-users"></i>
                            <p data-translate="authors">Authors</p>
                        </a>
                    </li>
                    <li><a href="./books.html"><i class="fa fa-book"></i>
                            <p data-translate="books">Books</p>
                        </a></li>
                    <li>
                        <a href="./languages.html">
                            <i class="fa fa-language"></i>
                            <p data-translate="languages">Languages</p>
                        </a>
                    </li>
                    <li>
                        <a onclick="Logout()">
                            <i class="fa-solid fa-right-from-bracket"></i>
                            <p data-translate="logout">Logout</p>
                        </a>
                    </li>

                </ul>
            </div>
        </div>

        <div class="main-panel">
            <!-- Navbar -->
            <nav class="navbar navbar-expand-lg navbar-absolute fixed-top navbar-transparent">
                <div class="container-fluid">
                    <select id="language-dropdown" class="form-control"
                        style="width: auto; display: inline-block; margin-right: 15px;">
                        <option value="en" data-translate="optionenglish">English</option>
                        <option value="hi" data-translate="optionhindi">Hindi</option>
                    </select>
                    <div class="navbar-wrapper">
                        <a class="navbar-brand" href="javascript:;" data-translate="dashboard">Add Language</a>
                    </div>
                    <div class="navbar-toggle">
                        <button class="navbar-toggler" type="button" onclick="toggleSidebar()">
                            <span class="navbar-toggler-bar bar1"></span>
                            <span class="navbar-toggler-bar bar2"></span>
                            <span class="navbar-toggler-bar bar3"></span>
                        </button>
                    </div>
                </div>
            </nav>

            <!-- Page Content -->
            <div class="content" style="min-height: 75vh;">
                <div class="container">
                    <h2 class="my-4" data-translate="add_language">Add Language</h2>
                    <form id="languageForm">
                        <div class="form-group">
                            <label for="languageName" data-translate="language_name">Language Name</label>
                            <input pattern="[a-zA-Z\s]+" type="text" id="languageName" class="form-control"
                                placeholder="Enter language name" required>
                        </div>
                        <button type="submit" class="btn btn-primary" data-translate="add_language">Add
                            Language</button>
                    </form>
                    <div id="message" class="mt-3"></div>
                </div>
            </div>


            <footer class="footer footer-black footer-white">
                <div class="container-fluid">
                    <hr>
                    <div class="row">
                        <div class="credits mx-auto">
                            <span class="copyright">
                                ©
                                <script>document.write(new Date().getFullYear())</script>, <span
                                    data-translate="copyright">All rights reserved by Pustakam</span>
                            </span>
                        </div>
                    </div>
                </div>
            </footer>
        </div>
    </div>

    <!-- Core JS Files -->
    <script src="./assets/js/core/jquery.min.js"></script>
    <script src="./assets/js/core/popper.min.js"></script>
    <script src="./assets/js/core/bootstrap.min.js"></script>
    <script>
        function Logout() {
            localStorage.removeItem('loggedadmin')
            location.href = '/login.html'
        }
        const translations = {
            en: {
                logotxt: "Pustakam",
                dashboard: "Dashboard",
                authors: "Authors",
                categories: "Categories",
                books: "Books",
                add_language: "Add Language",
                language_name: "Language Name",
                add_language_button: "Add Language",
                optionenglish: "English",
                optionhindi: "Hindi",
                copyright: "All rights reserved by Pustakam",
                "books": "Books",
                "languages": "Languages",
                "logout": "Logout",

            },
            hi: {
                logotxt: "पुस्तकम",
                dashboard: "डैशबोर्ड",
                authors: "लेखक",
                categories: "श्रेणियाँ",
                books: "पुस्तकें",
                add_language: "भाषा जोड़ें",
                language_name: "भाषा का नाम",
                add_language_button: "भाषा जोड़ें",
                optionenglish: "अंग्रेज़ी",
                optionhindi: "हिंदी",
                copyright: "सभी अधिकार पुस्तकम द्वारा सुरक्षित",
                "books": "पुस्तकें",
                "languages": "भाषाएँ",
                "logout": "लॉग आउट",

            },
        };

        // Function to load translations
        function loadLanguage(language) {
            document.querySelectorAll("[data-translate]").forEach((element) => {
                const key = element.getAttribute("data-translate");
                if (translations[language] && translations[language][key]) {
                    element.textContent = translations[language][key];
                }
            });
        }

        // Language dropdown change event
        document.getElementById("language-dropdown").addEventListener("change", function () {
            const selectedLanguage = this.value;
            localStorage.setItem("language", selectedLanguage); // Save the selected language
            loadLanguage(selectedLanguage); // Apply translations
        });

        // Load the saved language on page load or default to English
        const savedLanguage = localStorage.getItem("language") || "en";
        document.getElementById("language-dropdown").value = savedLanguage;
        loadLanguage(savedLanguage);
        document.getElementById("languageForm").addEventListener("submit", async function (event) {
            event.preventDefault();

            const languageName = document.getElementById("languageName").value;

            try {
                const response = await fetch("https://pustakam.pythonanywhere.com/languages/", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                    },
                    body: JSON.stringify({
                        languages: languageName,
                    }),
                });

                if (response.ok) {
                    const result = await response.json();
                    document.getElementById("message").innerHTML = `
                <div class="alert alert-success">Language added successfully!</div>
            `;
                    document.getElementById("languageForm").reset();
                } else {
                    const error = await response.json();
                    document.getElementById("message").innerHTML = `
                <div class="alert alert-danger">Error: ${error.message || "Failed to add language."}</div>
            `;
                }
            } catch (error) {
                console.error("Error adding language:", error);
                document.getElementById("message").innerHTML = `
            <div class="alert alert-danger">An error occurred. Please try again.</div>
        `;
            }

            // Clear the message after 3 seconds
            setTimeout(() => {
                document.getElementById("message").innerHTML = "";
            }, 3000);
        });
        document.getElementById("languageName").addEventListener("input", function (event) {
            // Get the current value
            const currentValue = this.value;

            // Allow only letters (a-z, A-Z) and spaces
            const validValue = currentValue.replace(/[^a-zA-Z\s]/g, "");

            // Set the corrected value back to the input
            if (currentValue !== validValue) {
                this.value = validValue;
            }
        });

    </script>
</body>

</html>